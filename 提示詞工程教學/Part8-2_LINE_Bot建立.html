<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8-2 LINE Bot 建立與 Webhook 設定 - LINE AI 評語機器人</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', Arial, sans-serif;
            background: linear-gradient(135deg, #0c1445 0%, #1a237e 50%, #283593 100%);
            min-height: 100vh; overflow: hidden; color: #333;
        }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(2px 2px at 20px 30px, white, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent);
            background-size: 550px 250px; animation: twinkle 8s ease-in-out infinite;
            pointer-events: none; z-index: 0;
        }
        @keyframes twinkle { 0%, 100% { opacity: 0.8; } 50% { opacity: 0.4; } }
        .nav-bar {
            position: fixed; top: 0; left: 0; right: 0; height: 60px;
            background: rgba(26, 35, 126, 0.95); backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.15);
            display: flex; justify-content: space-between; align-items: center;
            padding: 0 30px; z-index: 10000;
        }
        .nav-title { font-size: 20px; font-weight: 700;
            background: linear-gradient(90deg, #00c300, #00e676);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .nav-buttons { display: flex; gap: 12px; }
        .nav-btn {
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255, 255, 255, 0.3);
            color: white; padding: 8px 18px; border-radius: 20px; cursor: pointer;
            font-size: 14px; font-weight: 600; text-decoration: none; transition: all 0.3s ease;
        }
        .nav-btn:hover { background: rgba(0, 195, 0, 0.3); border-color: #00c300; }
        .nav-arrow {
            position: fixed; top: 50%; transform: translateY(-50%);
            background: rgba(26, 35, 126, 0.8); color: white;
            width: 60px; height: 60px; border-radius: 50%;
            border: 2px solid rgba(0, 195, 0, 0.5); font-size: 24px;
            cursor: pointer; z-index: 9000; transition: all 0.3s;
            display: flex; align-items: center; justify-content: center;
        }
        .nav-arrow:hover { background: rgba(57, 73, 171, 0.9); transform: translateY(-50%) scale(1.1); }
        .prev-arrow { left: 30px; } .next-arrow { right: 30px; }
        .nav-arrow:disabled { opacity: 0.3; cursor: not-allowed; }
        .slide-container { width: 100%; height: 100vh; padding-top: 60px; position: relative; z-index: 1; }
        .slide {
            position: absolute; top: 60px; left: 0; width: 100%; height: calc(100vh - 60px);
            display: none; align-items: center; justify-content: center; padding: 40px;
            opacity: 0; transition: opacity 0.4s ease; z-index: 10;
        }
        .slide.active { display: flex; opacity: 1; z-index: 20; }
        .content-card {
            background: rgba(255, 255, 255, 0.97); border-radius: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5); padding: 35px 45px;
            max-width: 1400px; width: 96%; max-height: 88vh; overflow-y: auto;
        }
        h1 { font-size: 38px; margin-bottom: 15px; text-align: center;
            background: linear-gradient(135deg, #00c300, #00e676);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        h2 { color: #00c300; font-size: 28px; margin-bottom: 20px;
            border-bottom: 4px solid; border-image: linear-gradient(90deg, #00c300, #00e676) 1; padding-bottom: 10px; }
        h3 { color: #00a000; font-size: 20px; margin: 18px 0 10px 0; }
        h4 { color: #00c300; font-size: 17px; margin: 12px 0 8px 0; }
        p, li { font-size: 16px; line-height: 1.7; color: #444; margin-bottom: 8px; }
        ul, ol { margin-left: 25px; margin-bottom: 12px; }
        .step-box {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-left: 5px solid #00c300; padding: 18px 22px;
            border-radius: 0 15px 15px 0; margin: 15px 0;
        }
        .step-box h4 { color: #00c300; margin-top: 0; }
        .warning-box {
            background: linear-gradient(135deg, #fff3e0, #ffe0b2);
            border-left: 5px solid #ff6f00; padding: 18px 22px;
            border-radius: 0 15px 15px 0; margin: 15px 0;
        }
        .warning-box h4 { color: #e65100; margin-top: 0; }
        .grid-2 { display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 15px 0; }
        .card { background: #f5f5f5; border-radius: 15px; padding: 20px; border-top: 4px solid #00c300; }
        .card.orange { border-top-color: #ff6f00; }
        .card h4 { margin-top: 0; }
        .tag { display: inline-block; background: #00c300; color: white; padding: 4px 12px;
            border-radius: 15px; font-size: 12px; margin-right: 8px; margin-bottom: 8px; }
        .tag.orange { background: #ff6f00; }
        .tag.red { background: #d32f2f; }
        .progress-indicator { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            display: flex; gap: 8px; z-index: 9999; }
        .progress-dot { width: 12px; height: 12px; border-radius: 50%;
            background: rgba(255, 255, 255, 0.3); cursor: pointer; transition: all 0.3s; }
        .progress-dot.active { background: #00c300; transform: scale(1.3); }
        @media (max-width: 900px) { .grid-2 { grid-template-columns: 1fr; }
            .content-card { padding: 20px; } h1 { font-size: 28px; } h2 { font-size: 22px; } }
    </style>
</head>
<body>
    <nav class="nav-bar">
        <div class="nav-title">8-2 LINE Bot 建立與 Webhook 設定</div>
        <div class="nav-buttons">
            <a href="index2.html" class="nav-btn">首頁</a>
            <a href="Part8-3_GAS程式碼撰寫.html" class="nav-btn">下一章</a>
            <button class="nav-btn" onclick="toggleFullscreen()">全螢幕</button>
            <a href="https://www.youtube.com/@Liang-yt02" target="_blank" class="nav-btn">YT</a>
            <a href="https://www.facebook.com/?locale=zh_TW" target="_blank" class="nav-btn">FB</a>
            <a href="https://www.facebook.com/groups/2754139931432955?locale=zh_TW" target="_blank" class="nav-btn">3A</a>
        </div>
    </nav>
    <button class="nav-arrow prev-arrow" onclick="prevSlide()">←</button>
    <button class="nav-arrow next-arrow" onclick="nextSlide()">→</button>

    <div class="slide-container">
        <!-- Slide 1 -->
        <div class="slide active">
            <div class="content-card" style="text-align: center;">
                <div style="margin-bottom: 25px;">
                    <span class="tag">Part 8-2</span>
                    <span class="tag orange">實作</span>
                </div>
                <h1>LINE Bot 建立與 Webhook 設定</h1>
                <p style="font-size: 20px; color: #00c300; margin: 25px 0;">
                    建立你的 LINE 官方帳號機器人
                </p>
                <div style="margin-top: 30px; padding: 25px; background: linear-gradient(135deg, #e8f5e9, #c8e6c9); border-radius: 15px;">
                    <p style="font-size: 17px; margin: 0;">
                        本單元將一步步帶你建立 LINE Bot<br>
                        並設定 Webhook 連接到 Google Apps Script
                    </p>
                </div>
            </div>
        </div>

        <!-- Slide 2: 進入 LINE Developers -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 1：進入 LINE Developers</h2>
                <div class="step-box">
                    <h4>操作步驟</h4>
                    <ol>
                        <li>開啟瀏覽器，前往 <strong>developers.line.biz</strong></li>
                        <li>點擊右上角「Log in」</li>
                        <li>選擇「使用 LINE 帳號登入」</li>
                        <li>用手機 LINE App 掃描 QR Code 登入</li>
                        <li>第一次登入需填寫開發者資料</li>
                    </ol>
                </div>
                <div class="warning-box">
                    <h4>注意事項</h4>
                    <ul style="margin-bottom: 0;">
                        <li>必須使用與 LINE App 相同的帳號登入</li>
                        <li>開發者名稱建議用真實姓名或學校名稱</li>
                        <li>Email 請填寫可收信的信箱</li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Slide 3: 建立 Provider -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 2：建立 Provider</h2>
                <div class="step-box">
                    <h4>什麼是 Provider？</h4>
                    <p>Provider 是「服務提供者」，可以是你的名字、學校或公司。一個 Provider 下可以有多個 Channel（機器人）。</p>
                </div>
                <div class="step-box">
                    <h4>建立步驟</h4>
                    <ol>
                        <li>登入後點擊「Create a new provider」</li>
                        <li>輸入 Provider 名稱：例如「<strong>OO學校評量系統</strong>」</li>
                        <li>點擊「Create」建立</li>
                    </ol>
                </div>
                <div class="grid-2">
                    <div class="card">
                        <h4>命名建議</h4>
                        <p style="margin-bottom: 0;">個人使用：你的姓名<br>學校使用：學校名稱+用途</p>
                    </div>
                    <div class="card orange">
                        <h4>Provider 用途</h4>
                        <p style="margin-bottom: 0;">管理多個 LINE Bot<br>例如：評量機器人、通知機器人...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 4: 建立 Messaging API Channel -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 3：建立 Messaging API Channel</h2>
                <div class="step-box">
                    <h4>建立步驟</h4>
                    <ol>
                        <li>在 Provider 頁面點擊「Create a Messaging API channel」</li>
                        <li>填寫 Channel 資訊：
                            <ul>
                                <li><strong>Channel name：</strong>AI 評語小幫手</li>
                                <li><strong>Channel description：</strong>學生作品 AI 評語回饋系統</li>
                                <li><strong>Category：</strong>Education（教育）</li>
                                <li><strong>Subcategory：</strong>School</li>
                            </ul>
                        </li>
                        <li>勾選同意條款</li>
                        <li>點擊「Create」建立</li>
                    </ol>
                </div>
                <div class="warning-box">
                    <h4>Channel name 注意事項</h4>
                    <p style="margin-bottom: 0;">這就是學生加入好友後看到的機器人名稱，請使用清楚易懂的名稱。</p>
                </div>
            </div>
        </div>

        <!-- Slide 5: 取得 Channel Access Token -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 4：取得 Channel Access Token</h2>
                <div class="step-box">
                    <h4>操作步驟</h4>
                    <ol>
                        <li>進入剛建立的 Channel</li>
                        <li>點擊上方「Messaging API」分頁</li>
                        <li>滾動到最下方「Channel access token」區域</li>
                        <li>點擊「Issue」產生 Token</li>
                        <li><strong>複製並保存這串 Token！</strong></li>
                    </ol>
                </div>
                <div class="grid-2">
                    <div class="card">
                        <h4>Token 長什麼樣？</h4>
                        <p style="font-family: monospace; font-size: 12px; word-break: break-all; margin-bottom: 0;">
                            eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIx...（很長的一串）
                        </p>
                    </div>
                    <div class="warning-box" style="margin: 0;">
                        <h4>重要提醒</h4>
                        <p style="margin-bottom: 0;"><strong>不要外洩 Token！</strong><br>有 Token 就能控制你的機器人</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 6: 設定 Webhook URL -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 5：設定 Webhook URL</h2>
                <div class="step-box">
                    <h4>什麼是 Webhook？</h4>
                    <p>當有人傳訊息給機器人時，LINE 會自動把訊息「推送」到你指定的網址（Webhook URL）。我們要把這個網址設定成 Google Apps Script 的部署網址。</p>
                </div>
                <div class="step-box">
                    <h4>設定步驟</h4>
                    <ol>
                        <li>在「Messaging API」分頁找到「Webhook settings」</li>
                        <li>點擊「Edit」編輯</li>
                        <li>貼上 GAS 部署網址（下一單元會取得）</li>
                        <li>點擊「Update」儲存</li>
                        <li>開啟「Use webhook」開關</li>
                    </ol>
                </div>
                <div class="warning-box">
                    <h4>先暫停！</h4>
                    <p style="margin-bottom: 0;">Webhook URL 需要先完成 GAS 部署才能取得。我們在下一單元（8-3）完成 GAS 程式碼後，再回來設定這裡。</p>
                </div>
            </div>
        </div>

        <!-- Slide 7: 關閉自動回覆 -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 6：關閉自動回覆訊息</h2>
                <div class="step-box">
                    <h4>為什麼要關閉？</h4>
                    <p>LINE 官方帳號預設會自動回覆「感謝您的訊息」。我們要用自己的 AI 回覆，所以要關閉這個功能。</p>
                </div>
                <div class="step-box">
                    <h4>設定步驟</h4>
                    <ol>
                        <li>在「Messaging API」分頁找到「LINE Official Account features」</li>
                        <li>點擊「Auto-reply messages」旁的「Edit」</li>
                        <li>會跳轉到 LINE Official Account Manager</li>
                        <li>找到「回應設定」→ 關閉「自動回應訊息」</li>
                        <li>確保「Webhook」是開啟狀態</li>
                    </ol>
                </div>
                <div class="grid-2">
                    <div class="card">
                        <h4>正確設定</h4>
                        <ul style="margin-bottom: 0;">
                            <li>自動回應訊息：<strong style="color: #d32f2f;">關閉</strong></li>
                            <li>Webhook：<strong style="color: #4caf50;">開啟</strong></li>
                        </ul>
                    </div>
                    <div class="card orange">
                        <h4>錯誤設定的結果</h4>
                        <p style="margin-bottom: 0;">學生會同時收到「自動回覆」和「AI 評語」兩則訊息</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 8: 加入好友測試 -->
        <div class="slide">
            <div class="content-card">
                <h2>Step 7：加入好友測試</h2>
                <div class="step-box">
                    <h4>取得 QR Code</h4>
                    <ol>
                        <li>在「Messaging API」分頁找到「QR code」</li>
                        <li>這就是你的機器人 QR Code</li>
                        <li>用手機 LINE 掃描加入好友</li>
                    </ol>
                </div>
                <div class="grid-2">
                    <div class="card">
                        <h4>測試方式</h4>
                        <ol style="margin-bottom: 0;">
                            <li>用手機加入機器人好友</li>
                            <li>傳送一則測試訊息</li>
                            <li>確認沒有收到自動回覆</li>
                            <li>（Webhook 設定後才會有 AI 回覆）</li>
                        </ol>
                    </div>
                    <div class="step-box" style="margin: 0;">
                        <h4>分享給學生</h4>
                        <p style="margin-bottom: 0;">之後可以把 QR Code 放到課程網站或印成海報，讓學生掃描加入。</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Slide 9: 小結 -->
        <div class="slide">
            <div class="content-card" style="text-align: center;">
                <h2>本單元小結</h2>
                <div class="grid-2" style="text-align: left; margin: 30px 0;">
                    <div class="step-box">
                        <h4>已完成的設定</h4>
                        <ul style="margin-bottom: 0;">
                            <li>✅ 建立 LINE Developers 帳號</li>
                            <li>✅ 建立 Provider</li>
                            <li>✅ 建立 Messaging API Channel</li>
                            <li>✅ 取得 Channel Access Token</li>
                            <li>✅ 關閉自動回覆訊息</li>
                            <li>⏳ Webhook URL（待設定）</li>
                        </ul>
                    </div>
                    <div class="card">
                        <h4>需要記住的資訊</h4>
                        <ul style="margin-bottom: 0;">
                            <li><strong>Channel Access Token</strong>（很長的一串）</li>
                            <li>下一單元會用到！</li>
                        </ul>
                    </div>
                </div>
                <div style="padding: 25px; background: linear-gradient(135deg, #e8f5e9, #c8e6c9); border-radius: 15px;">
                    <p style="font-size: 18px; margin: 0; color: #00c300;">
                        <strong>下一單元：8-3</strong><br>
                        GAS 程式碼撰寫（核心實作）
                    </p>
                </div>
            </div>
        </div>
    </div>

    <div class="progress-indicator"></div>
    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide');
        const totalSlides = slides.length;
        function createProgressDots() {
            const container = document.querySelector('.progress-indicator');
            for (let i = 0; i < totalSlides; i++) {
                const dot = document.createElement('div');
                dot.className = 'progress-dot' + (i === 0 ? ' active' : '');
                dot.onclick = () => goToSlide(i);
                container.appendChild(dot);
            }
        }
        function updateProgress() { document.querySelectorAll('.progress-dot').forEach((dot, i) => { dot.classList.toggle('active', i === currentSlide); }); }
        function showSlide(index) {
            slides.forEach((slide, i) => { slide.classList.toggle('active', i === index); });
            updateProgress();
            document.querySelector('.prev-arrow').disabled = index === 0;
            document.querySelector('.next-arrow').disabled = index === totalSlides - 1;
        }
        function nextSlide() { if (currentSlide < totalSlides - 1) { currentSlide++; showSlide(currentSlide); } }
        function prevSlide() { if (currentSlide > 0) { currentSlide--; showSlide(currentSlide); } }
        function goToSlide(index) { currentSlide = index; showSlide(currentSlide); }
        document.addEventListener('keydown', (e) => { if (e.key === 'ArrowRight' || e.key === ' ') nextSlide(); if (e.key === 'ArrowLeft') prevSlide(); });
        createProgressDots(); showSlide(0);

        function toggleFullscreen() {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen();
            } else {
                document.exitFullscreen();
            }
        }
    </script>
</body>
</html>
